<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<script src="http://libs.baidu.com/jquery/2.1.4/jquery.min.js"></script>
		<link rel="stylesheet" type="text/css" href="../../static/css/header/header.css"/>
		<link rel="stylesheet" type="text/css" href="../../static/css/public/index.css"/>
		<script src="https://cdn.bootcss.com/vue/2.4.2/vue.min.js"></script>
		<link rel="stylesheet" href="../../static/css/base.css" />
		<title></title>
		<style>
			.cq-content{
				float: left;
				width:180px;
				margin: 0 5px 0 0;
			}
			.cp-content{
				float: left;
				width:760px;
			}
			
			.classInfo{
				text-align: center;

			}
			.classInfo .img	img{
				width: 88px;
				height: 88px;
				border-radius: 88px;
				
			}
			.column2{
				width:200px
			}
			.menu ul{
				padding:  0 0 0 0;
				margin:  0 0 0 0;
				
			}
			.menu ul li{
				padding: 5px;
			}
			.menu ul li a img{
				width: 16px;
				height: 16px;
				
			}
			
			.dialog .footer{
				position: absolute;
				bottom: 20px;
				right:20px
			}
		
	
		</style>
		
	</head>
	<body >
		<div class="header" id="header">
			<div class="icon">
				<img src="../../static/img/icon.png" class="img" />
			</div>
			
			<ul>
				<li>
					<a href="index2teacher.html" style="color: white;">课堂管理</a>
					
					
				</li>
				
				
				
			</ul>
			<div class="right">
				<a href="" >
					购物车
				</a>
				<a href="">
					登录
				</a>
				<a href="">
					注册
				</a>
					
			</div>
			<div style="clear: both;"></div>
		</div>
		<div class="bodyer">
			
			<div class="bodyCenter">
				<div class="cq-content">
					<div class="module-box">
						<div class="classInfo"> 
							<div class="img">
								<img src="http://localhost:8080/resource/seofhsohflkzshbfclzjk.jpg" alt="" />
							</div>
							<div class="className">
								javaEE企业级开发
							</div>
							<div class="classDesc">
								周三1-2节课
							</div>
						</div>
						<div class="clear"></div>
					</div>
					<div class="module-box">
						<div class="menu">
						<ul>
							<li>	
								<a onclick="go('enterOneClass.html')">
									<img src="../../static/img/teacher/列表.png" alt="" />
									<span>班级列表</span>
								</a>
							</li>
							<li>	
								<a onclick="go('enterOneClassTest.html')">
									<img src="../../static/img/teacher/考试.png" alt="" />
									<span>考试信息</span>
								</a>
							</li>
							<li>	
								<a onclick="go('enterOneClassSign.html')">
									<img src="../../static/img/teacher/签到.png" alt="" />
									<span>班级签到</span>
								</a>
							</li>
							<li>	
								<a onclick="go('enterOneClassNotice.html')">
									<img src="../../static/img/teacher/公告发布.png" alt="" />
									<span>发布公告</span>
								</a>
							</li>
							<li>	
								<a onclick="go('enterOneClassResource.html')">
									<img src="../../static/img/teacher/上传.png" alt="" />
									<span>资源管理</span>
								</a>
							</li>
							<li>	
								<a onclick="go('enterOneClassHomework.html')">
									<img src="../../static/img/teacher/作业.png" alt="" />
									<span>作业信息</span>
								</a>
							</li>
							
						</ul>
						</div>
					</div>
				
					
					
				</div>
				<div class="cp-content">
					<div class="module-box">
						<h1 class="h1">
							班级签到
							<div style="text-align: right;float: right;">
								<button class="btn" onclick="publishSign()">发起签到</button>
							</div>
							
							<div class="clear"></div>
						</h1>
						<div class="stat-list" id="signs">
							<div class="list-head">
								<div class="item column2">签到时间</div>
								<div class="item column1">签到人数</div>
								<div class="item column1">到课率</div>
								<div class="item column2">操作</div>
								
								<div class="clear"></div>
							</div>
							<div id="students">
								<div class="list-body" v-for="data in datas" >
									
									<div class="item column2"> {{data.beginTime}}</div>
									<div class="item column1">{{data.num}}</div>
									<div class="item column1">{{data.rate}}</div>
									<div class="item column2">
										<button class="btn" v-bind:onclick="['showNoSignList('+data.id+')']">查看未到学生</button>
									</div>
									
									<div class="clear"></div>
								</div>
								
							</div>
							
							
							<div class="clear"></div>
						</div>
						<div class="page-util">
							<ul>
								<li>首页</li>
								<li>上一页</li>
								<li class="page-util-active" style="color: #FFF;">1</li>
								<li>2</li>
								<li>3</li>
								<li>4</li>
								<li>5</li>
								<li>6</li>
								<li>7</li>									
								<li>8</li>
								<li>下一页</li>
								<li>末页</li>
							</ul>
						</div>
						<div class="clear"></div>
						
					</div>
					
				</div>	
				
			</div>
			
			
			
		</div>
		
		
		<div class="footer">
			
		</div>
		
		
	</body>

	
	<div id="dialog" class="dialog" >
		<div id="stus">
		<div class="stat-list" >
			<div class="list-head">
				<div class="item column2">学号</div>
				<div class="item column1">姓名</div>
				
				
				<div class="clear"></div>
			</div>
			<div id="students">
				<div class="list-body" v-for="data in datas" >
					
					<div class="item column2"> {{data.user_id}}</div>
					<div class="item column1">{{data.username}}</div>
					
					
					<div class="clear"></div>
				</div>
								
			</div>
			
			
			
			
			<div class="clear"></div>
			
		</div>
		<div class="footer">
			
			<button onclick="hideDialog()" class="btn">上一页</button>			
			<button onclick="hideDialog()" class="btn">下一页</button>
			<button onclick="hideDialog()" class="btn">我已经知道了</button>
		</div>
		</div>
	</div>
	<div id="mask" class="mask"></div>
</html>
<script type="text/javascript" src="../../static/js/font.js"></script>
<script type="text/javascript" src="../../static/js/base.js" ></script>
<script type="text/javascript" src="../../static/js/teacher.js" ></script>
<script>
function showNoSignList(signId){
	showDialog({
		id:"dialog",
		width:400,
		height:400
	})
	selectNoSignStudentListBySignId(signId,1);
}


var v2 = null;
function selectNoSignStudentListBySignId(signId,first){
		$.ajax({
			type:"get",
			url:controllerUrl+"user_info/selectNoSignStudentListBySignId",
			async:true,
			dataType:"json",
			data:{
				signId:signId,
				classNumber:url("classNumber"),
				first:first,
				each:5,
				
			},success:function(data){
				console.log(data);
				if(v2==null||v2=="null"){
					v2 = new Vue({
						el:"#stus",
						data:{
							datas:data.data
						}
						
					})
					
				}
				
				
			},error:function(data){
				
			}
		});		
	}

var v = null;
selectSignListByClassNumber(1);
function selectSignListByClassNumber(first){
	$.ajax({
		type:"get",
		url:controllerUrl+"sign/selectSignListByClassNumber",
		async:true,
		dataType:"json",
		data:{
			classNumber:url("classNumber"),
			first:first,
			each:10,
			
		},success:function(data){
			console.log(data);
			if(v=="null"||v==null){
				v= new Vue({
					el:"#signs",
					data:{
						datas:data.data
					}
					
					
				})
				
			}
			
			
		},error:function(data){
			
		}
	});		
}
function publishSign(){
	$.ajax({
		type:"get",
		url:controllerUrl+"sign/publishSign",
		async:true,
		dataType:"json",
		data:{
			token:localStorage["token"],
			classNumber:url("classNumber"),
			lastTime:5*60*1000
		},success:function(data){
			if(data.info=="no_permission"){
				show("权限不足")
			}else if(data.info=="signing"){
				show("正在发布签到")
			}else if(data.info=="success"){
				show("发起签到成功")
			}
			
			
		}
	});
	
}


</script>
<script type="text/javascript" src="../../static/js/font.js"></script>
<script type="text/javascript" src="../../static/js/base.js" ></script>
<script type="text/javascript" src="../../static/js/teacher.js" ></script>

<script>
	
	
</script>



